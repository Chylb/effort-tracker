<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:replace="fragments/head ::head"></div>
    <title>Activities</title>
</head>

<body>

<div th:replace="fragments/navbar ::navbar"></div>

<div class="container">
    <h1>My activities</h1>
    </br>
    <table class="table table-striped" id="activityTable">
        <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Distance</th>
            <th scope="col">Date</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
    $("#navActivities").addClass("active");

    $.getJSON("/api/activities", function (data) {
        populateTable(data);
    })

    function populateTable(data) {
        const table = $('#activityTable')
        console.log(data);
        for (const a of data) {
            const date = new Date(a.date);
            const row = `<tr>
                  <td><a href="/activity/${a.id}">${a.name}</a></td>
                  <td>${a.distance}</td>
                  <td>${date.toLocaleString('en-GB')}</td>
                  `
            table.append(row)
        }
    }
</script>

<div th:replace="fragments/footer ::footer"></div>

</body>
</html>